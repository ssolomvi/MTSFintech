# Домашние задания по курсу МТС Финтех.Академии

## HW-1

Построить иерархию жиовтных в виде наслудемых классов.

* Интерфейс `Animal` имеет 4 метода
    - `getBreed()`;
    - `getName()`;
    - `getCost()`;
    - `getCharacter()`;
* Абсрактный класс `AbstractAnimal` имеет 4 поля:
    - `protected String breed;` // порода
    - `protected String name;` // имя
    - `protected BigDecimalCost;` // цена в магазине, округляется до 2 знаков после запятой
    - `protected String character;` // характер
* Реализованы 2 абстрактных класса `Predator` и `Pet`

Методы интерфейса должны содержать описание по `JavaDoc`.

Создаем интерфейс `CreateAnimalService` с `default` методом по созданию 10 уникальных животных при помощи цикла `while`.

B `CreateAnimalServicelmpl` создаем перегруженный метод, который создает `N` животных с помощью цикла for (где `N` -
параметр,
передаваемый в метод). Также в этом классе переопределяем дефолтный метод, используя цикл `do-while` для создания 10
уникальных животных, вместо `while`.

Во всех трех методах сделать вывод на консоль результат создания нового животного (через `System.out.println`).

В классе `main` вызвать методы по созданию животных.

В качестве сборщика проектов рекомендуется использовать `gradle`.

## HW-2

Дорабатываем интерфейс `Animal` + всех наследников, добавляя новое поле:

* `LocalDate birthDate;` // День рождения животного в формате `dd-MM-уууу`. Генерируются любые даты, а не только текущие

Переопределить метод `equals()` у всех наследников `Animal`.

В `CreateService` для методов генерации новых животных нужно изучить и применить паттерн фабрика `(Factory)`.
Сами методы должны возвращать массив сгенерированных животных.

Создаем новый интерфейс `SearchService` и его наследника, в котором будут реализованы методы.

1. `findLeapYearNames`; На вход подается массив животных. При помощи цикла (любой по желанию) найти всех животных,
   которые родились в високосный год. По итогу работы вернуть массив из имен животных.
2. `findOlderAnimal`; На вход подается массив животных. При помощи цикла `for` найти всех животных, возраст которых
   старше `N` лет, где `N` аргумент метода. Результат работы метода - массив животных.
3. `findDuplicate`; На вход подается массив животных. Метод выводит на экран дубликаты животных.

Для корректной работы методов требуется убедиться, что входные массивы будут содержать необходимые данные для
корректного исполнения методов.

Все публичные методы имеют описание по `JavaDoc`.

В методе `main` переделать код на вызов `CreateService`, который подготавливает данные для передачи их
в `SearchService`. Результаты работы `SearchService` вывести на экран.

## HW-3

Необходимо покрыть уже имеющийся функционал `unit` тестами.

1. Есть метод `equals` который был переопределен в наследниках `Animals`. Нужно написать тесты, чтобы проверить
   корректность его переопределения и исключения возможности коллизий.

2. Есть метод `findLeapYearNames()`. Нужно написать тесты, которые будут проверять корректность работы метода:
    - при заданном массиве - возвращать корректный массив из животных в соответствии со спецификацией метода.

3. Есть метод `findOlderAnimal()`. Нужно написать тесты, которые будут проверять корректность работы метода:
    - При заданном массиве и параметре `N` лет – возвращать корректный массив животных. Будет плюсом
      использования `@ParameterizedTest` и `@ValueSource`

4. Есть метод `findDuplicate()`. Нужно написать тесты, которые будут проверять корректность работы метода:
    - При заданном массиве – находить дубликаты животных. \
      Для реализации этого теста есть совет переопределить реализацию этого метода, и вынести вывод на экран в отдельный
      метод (например `printDuplicate()`), который будет вызывать сам метод `findDuplicate()` в коде.

Все тесты должны иметь наименование, необходимо для этого воспользоваться аннотацией из лекции.

Будет плюсом, если разделите тесты на 2 вложенных класса, в первом классе тесты из задания под номером 1, во втором
классе тесты из заданий под номерами 2, 3, 4.

## HW-4

1. Переписать `Main` класс так, что бы он запускал `ApplicationContext`. \
   `ApplicationContext` должен после запуска содержать такие бины, как:
    - `CreateAnimalService`
    - `AnimalsRepository` \
      После инициализации контекста, нужно вызвать все методы `AnimalsRepository` и
      результаты вызовов вывести в стандартный поток вывода
2. Изменить pеализацию `CreateAnimalService`
    - Сделать `Bean`, который должен инициализироваться в конфигурационном классе(`@Configuration`)
    - Добавить поле для хранения типа животного
    - Сделать `scope=prototype` для бина, чтобы каждый раз при вызове мы могли получить новое рандомное животное
3. Создайте интерфейс и его реализацию `AnimalsRepository`, он будет использоваться в качестве хранилища создаваемых
   животных. \
   Для хранения данных в классе `AnimalsRepositorylmpl` добавьте поле с массивом животных. Перенесите методы с классa \
   `SearchService` в `AnimalsRepository`. `SearchService` в дальнейшем не потребуется. \
   В такой реализации требуется убрать из методов передачу массива животных и использовать вместо этого массив ранее
   созданных животных.

В итоге должны получится такие методы:

``` Java
String[] findLeapYearNames(); 
Animal[] findOlderAnimal(int age);
Set<Animal> findDuplicate();
void printDuplicate();
```

4. В `PostConstruct` методе `AnimalsRepositorylmpl` требуется наполнения хранилища животными. Сделать это можно с
   помощью бина `CreateAnimalService`
5. Написать свой `BeanPostProcessor` для `CreateAnimalService`, который должен инициализировать поле `AnimalType`
   имеющейся логикой

## HW-5

Домашнее задание по теме `Spring Boot`

1. Переписать приложение для запуска на фреймворке `Spring Boot`. Должна быть возможность проверить работоспособность с
   помощью сборки и запуска проекта такими командами как:

``` Shell
./gradlew build
java -jar <application.jar>
```

В стандартный вывод должны выводиться результаты работы приложения

2. Конфигурирование животных вынесите в отдельный `Spring Boot Starter`

3. Имена для животных вынести в `application.properties/yml`. При создании животного должно подставляться рандомно имя
   из
   списка определенного в `application.properties/yml`.

Например: `animal.cat.names=barsik,persik`. Про `inject array` можно почитать
по [ссылке](https://www.baeldung.com/spring-inject-arrays-lists).

4. Создайте `scheduler`, который раз в минуту будет делать вызов методов `AnimalsRepository` и выводить результаты в
   стандартный вывод.

## HW-6

Домашнее задание `Spring Boot Test`:

1. Добавить `SpringBootTest` тестирование для созданного ранее `Spring Boot`  стартера. Должно быть не менее 2
   положительных и 2 отрицательных сценариев.

2. Добавить `SpringBootTest` тестирование для основного приложения, которые проверяет корректность работы приложения.
   Должно быть не менее 2 положительных и 2 отрицательных сценариев.

3. Вынесите в `TestConfiguration` конфигурирование одного из используемых бинов.

4. Для тестов создайте `application-test.yml` в котором можно изменять наименования создаваемых животных.

## HW-7

В `CreateAnimalService` и `CreateAnimalServicelmpl` метод по созданию животных должен
возвращать `Map<String, List<Animal>>`,
который в качестве ключа содержит тип животного, а в значении список созданных животных.

Для `AnimalsRepository` и `AnimalsRepositorylmpl` поменять работу методов:

- `findLeapYearNames` должен возвращать `Map<String, LocalDate>`, которая содержит в качестве ключа тип животного + имя,
  а в
  значении дату рождения. Пример ключа: `Cat Barsik`, `Dog Spot` (русский язык допускается в именах).
- `findOlderAnimal` должен возвращать `Mар<Animal, Integer>`, которая содержит в качестве ключа животное, а в качестве
  значения возраст. Если при заданном значении поиска (передаваемый аргумент возраста) не было найдено ни одного
  животного, то вернуть нужно
  самого старшего из возможных. Данный кейс необходимо покрыть кейсами в тестах.
- `findDuplicate` должен возвращать `Mаp<String, Integer>`, которая содержит в качестве ключа строку с типом животного,
  а в
  значении количество найденных дублей. Пример данных: `Cat=1`, `Dog=3`.

Если где-то в других классах было использование массивов, то их нужно заменить на использование `List`.
Все изменения должны быть отражены в тестах.

Общее требование: пользоваться методами из `Stream API` в рамках текущего задания нельзя.

## HW-8
Для `AnimalsRepositorylmpl` для указанных ниже методов использовать `Stream API`: 
- `findLeapYearNames`
- `findOlderAnimal`
- `findDuplicate` в методе использовать `groupingBy`. При этом, метод по результату работы должен выдавать `Mаp<String,
List<Animal>>`, где `String` - тип животного (`Cat`, `Dog`, …), a `List` - список дубликатов.

Дополнительно в `AnimalsRepository` и `AnimalsRepositorylmpl` добавить следующие методы:
- `findAverageAge` на вход метод принимает список животных. Необходимо найти при помощи `Stream API` средний возраст всех
животных. Результат вывести на экран.
- `findOldAndExpensive` на вход метод принимает список животных. Необходимо найти при помощи `Stream API` животных, возраст
которых больше 5 лет и стоимость которых больше средней стоимости всех животных. Результатом работы метода должен быть
отсортированный по дате рождения (по возрастанию) список.
- `findMinConstAnimals` на вход метод принимает список животных. Необходимо найти при помощи `Stream API` 3 животных с самой
низкой ценой. Результатом работы метода должен быть список имен, отсортированный в обратном алфавитном порядке.

## HW-9
1. В методе, который помечен аннотацией `@Scheduled`, нужно добавить `try-catch` блок, который будет отлавливать ваши 
   ошибки и выводить их в лог средством `System.out.println()`.

2. В методах, которые принимают аргументы, нужно добавить проверку, что аргументы соответствуют ожидаемым требованиям 
   (например, при поиске животного по возрасту, если аргумент меньше 0, – это не удовлетворяет условиям) \
   Если аргумент не прошёл проверку, нужно выбросить собственное определённое вами `unchecked` исключение 
   (плюсом будет если наследование будет не от `Runtime`, а более узко определено, в зависимости от требования к параметру).

3. Метод `findMinConstAnimals` должен выбросить собственное определенное вами `checked` исключение 
   (плюсом будет, если, как и во втором пункте, сузите наследование), если переданный массив будет размером меньше, 
   чем предполагает логика работы метода.

Все эти исключения должны быть отловлены и выведены в лог (каждое должно быть отловлено отдельно) в соответствии с пунктом 1.

## HW-10
В программу нужно добавить потокобезопасность.

Коллекции/Мапы из `AnimalRepository` переделать в потокобезопасные коллекции/мапу.

## HW-11
> Можно для реализации многопоточности использовать классы из пакетов java.lang и java.util.concurrent.

Запуск потоков должен производиться в методе, помеченном `@PostConstruct`, в классе `ScheduledTasks`, 
НЕ В САМОМ МЕТОДЕ ШЕДУЛЛЕРА.

1. Метод `printDuplicate()` должен выполняться в отдельном потоке, постоянно выводя дубликаты в лог 
   (лучше реализовать с задержкой между выполнениями, например раз в 10 секунд, иначе будет много записей в логах).

2. Метод `findAverageAge()` так же должен работать в одном отдельном потоке, при этом, как и в пункте №2, выводить 
   информацию в лог, и с задержкой большей, чем поток с методом `printDuplicate()` -- предлагаю раз в 20 секунд.

Потокам надо присвоить имена, и они должны так же выводиться в лог.

Для более наглядной работы совет увеличить количество данных в `AnimalRepository`

## HW-12
